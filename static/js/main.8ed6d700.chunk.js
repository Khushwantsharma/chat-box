(this.webpackJsonpmyreact=this.webpackJsonpmyreact||[]).push([[0],{43:function(e,n,s){},44:function(e,n,s){},77:function(e,n,s){"use strict";s.r(n);var t=s(1),i=s.n(t),c=s(36),a=s.n(c),r=(s(43),s(38)),l=s(37),o=s(2),u=(s(44),s(15)),m=s(0),d=function(e){var n=e.user,s=e.g,i=e.soc,c=Object(t.useState)([]),a=Object(o.a)(c,2),r=a[0],l=a[1],d=Object(t.useState)([]),j=Object(o.a)(d,2),b=j[0],f=j[1];Object(t.useEffect)((function(){console.log("useeffect userlist"),console.log("user:",n),f((function(e){var s=e.slice();return n.map((function(e){!e.isGroup&&e.online&&s.push(Object(m.jsx)("div",{onClick:v.bind(undefined,e.name),className:"grouplistname",children:e.name},e.name))})),console.log("user k:",s),s}))}),[]);var v=function(e){console.log("[addToGroup]:",e),l((function(n){var s,t=n.slice(),i=0,c=Object(u.a)(t);try{for(c.s();!(s=c.n()).done;){if(s.value==e){console.log("[addToGroup]: Already present"),i=1;break}}}catch(a){c.e(a)}finally{c.f()}return i?(t=t.filter((function(n){if(n!=e)return n})),console.log("filtered list:",t)):(console.log("[addToGroup]: New data"),t.push(e)),t}))};if(r)r.map((function(e){return Object(m.jsx)("div",{className:"grouplistname",children:e})}));return Object(m.jsx)("div",{className:"group--main",children:Object(m.jsxs)("div",{className:"group--main-box",children:[Object(m.jsx)("button",{className:"cancel",onClick:function(e){e.preventDefault(),s(!1)},children:"\u2620\ufe0f\u274c\ufe0fCancel\ud83d\udeab\ufe0f\u2620\ufe0f"}),Object(m.jsxs)("form",{className:"groupname-form",onSubmit:function(e){e.preventDefault();var n=e.target.group_name.value;console.log("called",n),i.emit("new-group-list",n,r),s(!1)},children:[Object(m.jsx)("label",{htmlFor:"group_name",children:"Group Name:"}),Object(m.jsx)("input",{type:"text",id:"group_name",required:!0}),Object(m.jsx)("button",{type:"submit",children:"Create"})]}),Object(m.jsxs)("div",{className:"group--main-box--divider",children:[Object(m.jsxs)("div",{className:"group--default--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Select Users"}),Object(m.jsx)("div",{className:"group--users--list",children:b})]}),Object(m.jsxs)("div",{className:"group--selected--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Selected Users"}),Object(m.jsx)("div",{className:"group--users--list",children:r.map((function(e){return Object(m.jsx)("div",{className:"grouplistname",children:e},e)}))})]})]})]})})},j=void 0,b=function(e){var n=e.isgroup,s=e.user,i=e.flag,c=e.soc,a=e.index,r=e.name,l=e.uname,d=Object(t.useState)([]),b=Object(o.a)(d,2),f=b[0],v=b[1],p=Object(t.useState)([]),g=Object(o.a)(p,2),h=g[0],x=g[1],O=Object(t.useState)([]),N=Object(o.a)(O,2),S=N[0],k=N[1],M=Object(t.useState)({name:"",isSet:!1}),C=Object(o.a)(M,2),G=C[0],y=C[1];Object(t.useEffect)((function(){var e=s[a].groupMember.slice();console.log("[UseEffect]:"),console.log("user:",s,"index:",a),x((function(n){var t=n.slice();return s.map((function(n){console.log(n.name,n.online),n.isGroup||!n.online||n.name==l||_(n.name,e)||t.push(Object(m.jsx)("div",{onClick:w.bind(j,n.name),className:"grouplistname",children:n.name},n.name))})),t})),n&&k((function(n){var s=n.slice();return e.map((function(e){s.push(Object(m.jsx)("div",{onClick:w.bind(j,e),className:"grouplistname",children:e},e))})),s}))}),[]);var _=function(e,n){var s=!1;return n.forEach((function(n){if(e==n)return console.log("@@:",e,n),s=!0,!0})),s},w=function(e){v((function(n){var s,t=n.slice(),i=0,c=Object(u.a)(t);try{for(c.s();!(s=c.n()).done;){if(s.value==e){console.log("[addToGroup]: Already present"),i=1;break}}}catch(a){c.e(a)}finally{c.f()}return i?t=t.filter((function(n){if(n!=e)return n})):t.push(e),t}))};if(f)f.map((function(e){return Object(m.jsx)("div",{className:"grouplistname",children:e})}));return Object(m.jsx)("div",{className:"group--main",children:Object(m.jsxs)("div",{className:"group--main-box",children:[Object(m.jsx)("button",{className:"cancel",onClick:function(e){e.preventDefault(),i(!1)},children:"\u2620\ufe0f\u274c\ufe0fBack\ud83d\udeab\ufe0f\u2620\ufe0f"}),G.isSet?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"grouplistname",onClick:function(){y({name:"",isSet:!1}),v([])},children:"Back"}),Object(m.jsx)("div",{className:"grouplistname",onClick:function(e){e.preventDefault();var n=r;"add"==G.name?c.emit("add-to-group",n,f,s[a].groupMember):c.emit("remove-from-group",n,f,s[a].groupMember),i(!1)},children:"Done"})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"grouplistname",onClick:function(){return y({name:"add",isSet:!0})},children:"AddPeople"}),Object(m.jsx)("div",{className:"grouplistname",onClick:function(){return y({name:"remove",isSet:!0})},children:"RemovePeople"}),Object(m.jsx)("div",{className:"grouplistname",onClick:function(e,n){n.preventDefault(),c.emit("leave-from-group",r,[l],s[a].groupMember),i(!1)}.bind(j,"leave"),children:"Leave"})]}),G.isSet&&"add"==G.name?Object(m.jsxs)("div",{className:"group--main-box--divider",children:[Object(m.jsxs)("div",{className:"group--default--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Select Users"}),Object(m.jsx)("div",{className:"group--users--list",children:h})]}),Object(m.jsxs)("div",{className:"group--selected--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Selected Users"}),Object(m.jsx)("div",{className:"group--users--list",children:f.map((function(e){return Object(m.jsx)("div",{className:"grouplistname",children:e},e)}))})]})]}):null,G.isSet&&"remove"==G.name?Object(m.jsxs)("div",{className:"group--main-box--divider",children:[Object(m.jsxs)("div",{className:"group--default--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Select Users"}),Object(m.jsx)("div",{className:"group--users--list",children:S})]}),Object(m.jsxs)("div",{className:"group--selected--list",children:[Object(m.jsx)("div",{className:"title__mid",children:"Selected Users"}),Object(m.jsx)("div",{className:"group--users--list",children:f.map((function(e){return Object(m.jsx)("div",{className:"grouplistname",children:e},e)}))})]})]}):null]})})},f=s(20),v=Object(f.io)("https://hgchat.herokuapp.com/",{autoConnect:!1}),p=void 0,g=function(){var e=Object(t.useState)(!1),n=Object(o.a)(e,2),s=n[0],i=n[1],c=Object(t.useState)(!1),a=Object(o.a)(c,2),u=a[0],j=a[1],f=Object(t.useRef)(),g=Object(t.useState)([]),h=Object(o.a)(g,2),x=h[0],O=h[1],N=Object(t.useState)({name:"",index:-1,isGroup:!1,isSet:!1}),S=Object(o.a)(N,2),k=S[0],M=S[1],C=Object(t.useState)(""),G=Object(o.a)(C,2),y=G[0],_=G[1],w=Object(t.useState)({name:"",isSet:!1}),E=Object(o.a)(w,2),U=E[0],D=E[1],A=Object(t.useState)([]),T=Object(o.a)(A,2),F=T[0],q=T[1];Object(t.useEffect)((function(){v.onAny((function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),t=1;t<n;t++)s[t-1]=arguments[t];console.log(e,s)})),v.on("connect_error",(function(e){console.log("err:",e),D({name:"",isSet:!1})})),v.on("users",(function(e){0==e.length||(q((function(n){var s=n.slice();return e.forEach((function(e){s.push({name:e.name,message:[],online:e.online,isGroup:!1})})),s})),O((function(n){var s=n.slice();return e.forEach((function(e){s.push(Object(m.jsx)("div",{onClick:B.bind(p,e.name),className:e.online?"username--active":"username",children:e.name},e.name))})),s})))})),v.on("new-user",(function(e){q((function(n){var s;return(s=n?n.slice():[]).push({name:e.name,message:[],online:e.online,isGroup:!1}),s})),O((function(n){var s=n.slice();return s.push(Object(m.jsx)("div",{onClick:B.bind(p,e.name),className:e.online?"username--active":"username",children:e.name},e.name)),s}))})),v.on("offline",(function(e){O((function(n){for(var s=n.slice(),t=0;t<s.length;t++)s[t].key==e&&(s[t]=Object(m.jsx)("div",{onClick:B.bind(p,e),className:"username",children:e},e));return s})),q((function(n){for(var s,t=n.slice(),i=0;i<t.length;i++)e==t[i].name&&(s=i);return t[s].online=!1,t[s].message=[],t}))})),v.on("online",(function(e){O((function(n){for(var s=n.slice(),t=0;t<s.length;t++)s[t].key==e&&(s[t]=Object(m.jsx)("div",{onClick:B.bind(p,e),className:"username--active",children:e},e));return s})),q((function(n){for(var s,t=n.slice(),i=0;i<t.length;i++)e==t[i].name&&(s=i);return t[s].online=!0,t}))})),v.on("private-message",(function(e,n){q((function(s){for(var t,i=s.slice(),c=0;c<i.length;c++)n==i[c].name&&(t=c);var a=i[t].message;return a.push({mes:e,ismine:!1}),i[t].message=a,i}))})),v.on("error",(function(e){alert(e)})),v.on("new-group-req",(function(e,n){v.emit("new-group",e,n)})),v.on("room-joined",(function(e,n){q((function(s){var t;return(t=s?s.slice():[]).push({name:e,message:[],online:!1,isGroup:!0,groupMember:n}),t})),O((function(n){var s=n.slice();return s.push(Object(m.jsx)("div",{onClick:B.bind(p,e),className:"group--user",children:e},e)),s}))})),v.on("group-message",(function(e,n,s){q((function(t){for(var i,c=t.slice(),a=0;a<c.length;a++)n==c[a].name&&(i=a);var r=c[i].message;return r.push({mes:e,ismine:!1,owner:s}),c[i].message=r,c}))})),v.on("group-user-added",(function(e,n){q((function(s){var t,i=s.slice();t=i.findIndex((function(n){return n.name==e}));var c=i[t].groupMember.slice();return c.push.apply(c,Object(l.a)(n)),i[t].groupMember=c,i}))})),v.on("user-left",(function(e,n){q((function(s){for(var t=s.slice(),i=0;i<t.length;i++)if(t[i].name==e){t[i].groupMember=n;break}return t}))})),v.on("remove-from-group-req",(function(e){v.emit("leave-group",e),M({name:"",index:-1,isGroup:!1,isSet:!1}),q((function(n){for(var s=n.slice(),t=0;t<s.length;t++)if(s[t].name==e){s.splice(t,1),console.log("found :k".concat(s," &i:").concat(t));break}return s})),O((function(n){for(var s=n.slice(),t=0;t<s.length;t++)s[t].key==e&&s.splice(t,1);return s}))})),v.on("group-exit",(function(e,n){q((function(s){for(var t=s.slice(),i=0;i<t.length;i++)if(t[i].name==e){for(var c=0;c<t[i].groupMember.length;c++)t[i].groupMember[c]==n&&(t[i].groupMember.splice(c,1),c--);break}return t}))}))}),[]),Object(t.useEffect)((function(){""!=y&&M((function(e){var n=Object(r.a)({},e);if(F){n.name=y,n.isSet=!0;for(var s=0;s<F.length;s++)if(y==F[s].name){if(F[s].isGroup){n.isGroup=!0,n.index=s;break}n.index=s,n.isGroup=!1;break}}return n}))}),[y]),Object(t.useEffect)((function(){f.current&&f.current.scrollIntoView({smooth:!0})}),[f.current]);var I,B=function(e){_(e)};return U.isSet?(k.isSet&&F&&(I=k.isGroup?F[k.index].message.map((function(e,n){var s=n==F[k.index].message.length-1;return Object(m.jsxs)("div",{ref:s?f:null,className:e.ismine?"GMessage--main":"GMessage--oth",children:[e.ismine?null:Object(m.jsx)("div",{className:"flex--active",children:Object(m.jsx)("div",{className:"GMessage--main--author",children:e.owner})}),Object(m.jsx)("div",{className:"Message--main--content",children:e.mes}),Object(m.jsx)("div",{className:"Message--main--time",children:"12:00 pm"})]})})):F[k.index].message.map((function(e,n){var s=n==F[k.index].message.length-1;return Object(m.jsxs)("div",{ref:s?f:null,className:e.ismine?"Message--main":"Message--oth",children:[Object(m.jsx)("div",{className:"Message--main--content",children:e.mes}),Object(m.jsx)("div",{className:"Message--main--time",children:"12:00 pm"})]})}))),s?Object(m.jsx)(b,{isgroup:k.isGroup,name:k.name,flag:i,uname:U.name,user:F,index:k.index,soc:v}):u?Object(m.jsx)(d,{user:F,g:j,soc:v,index:k.index}):Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)("div",{className:"title",children:["Chat-System","("+U.name+")"]}),Object(m.jsxs)("div",{className:"Main--box",children:[Object(m.jsxs)("div",{className:"Main--box--users",children:[Object(m.jsx)("div",{className:"title",children:"Users"}),Object(m.jsx)("div",{className:"Main--box--users--list",children:x}),Object(m.jsx)("div",{className:"username",onClick:function(e){e.preventDefault(),j(!0)},children:"New group+"})]}),Object(m.jsxs)("div",{className:"Main--box--chat",children:[Object(m.jsxs)("div",{className:"title",children:["Chat Messages ",k.isSet?Object(m.jsx)("span",{className:"Active--Username--display",onClick:function(e){e.preventDefault(),i(!0)},children:k.name}):null]}),Object(m.jsx)("div",{className:"Main--box--chat--messagearea",children:k.isSet?I:Object(m.jsxs)("div",{className:"Message--main ",children:[Object(m.jsx)("div",{className:"Message--main--content",children:"START TALKING"}),Object(m.jsx)("div",{className:"Message--main--time",children:"12:00 am"})]})}),k.isSet?Object(m.jsx)("div",{className:"c",children:Object(m.jsxs)("form",{className:"cb--bind",onSubmit:function(e){e.preventDefault();var n=e.target.mes.value;k.isGroup?(v.emit("group-message",n,k.name),q((function(e){var s=e.slice(),t=s[k.index].message.slice();return t.push({mes:n,ismine:!0,owner:""}),s[k.index].message=t,s}))):(v.emit("private-message",n,k.name),q((function(e){var s=e.slice(),t=s[k.index].message.slice();return t.push({mes:n,ismine:!0}),s[k.index].message=t,s})))},children:[Object(m.jsx)("input",{className:"text--area",type:"text",id:"mes",name:"mes",required:!0}),Object(m.jsx)("button",{classes:"button--height text--bold",children:"Enter"})]})}):null]})]})]})):Object(m.jsx)("div",{className:"Username--main",children:Object(m.jsxs)("form",{className:"Username--form",onSubmit:function(e){e.preventDefault(),D({name:U.name,isSet:!0}),v.auth={username:U.name},v.connect()},children:[Object(m.jsx)("label",{htmlFor:"em",children:"UserName(Email):"}),Object(m.jsx)("input",{className:"text--area",type:"email",id:"em",onChange:function(e){D({name:e.target.value,isSet:!1})},name:"mes",required:!0}),Object(m.jsx)("button",{classes:"button--height text--bold",children:"Enter"})]})})},h=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,78)).then((function(n){var s=n.getCLS,t=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;s(e),t(e),i(e),c(e),a(e)}))};a.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root")),h()}},[[77,1,2]]]);
//# sourceMappingURL=main.8ed6d700.chunk.js.map